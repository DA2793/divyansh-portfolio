{
  "version": 3,
  "sources": ["browser-external:fs", "../../pdf-parse/lib/pdf-parse.js", "../../pdf-parse/index.js"],
  "sourcesContent": ["module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"fs\" has been externalized for browser compatibility. Cannot access \"fs.${key}\" in client code. See http://vitejs.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "var PDFJS = null;\n\nfunction render_page(pageData) {\n    //check documents https://mozilla.github.io/pdf.js/\n    //ret.text = ret.text ? ret.text : \"\";\n\n    let render_options = {\n        //replaces all occurrences of whitespace with standard spaces (0x20). The default value is `false`.\n        normalizeWhitespace: false,\n        //do not attempt to combine same line TextItem's. The default value is `false`.\n        disableCombineTextItems: false\n    }\n\n    return pageData.getTextContent(render_options)\n        .then(function(textContent) {\n            let lastY, text = '';\n            //https://github.com/mozilla/pdf.js/issues/8963\n            //https://github.com/mozilla/pdf.js/issues/2140\n            //https://gist.github.com/hubgit/600ec0c224481e910d2a0f883a7b98e3\n            //https://gist.github.com/hubgit/600ec0c224481e910d2a0f883a7b98e3\n            for (let item of textContent.items) {\n                if (lastY == item.transform[5] || !lastY){\n                    text += item.str;\n                }  \n                else{\n                    text += '\\n' + item.str;\n                }    \n                lastY = item.transform[5];\n            }            \n            //let strings = textContent.items.map(item => item.str);\n            //let text = strings.join(\"\\n\");\n            //text = text.replace(/[ ]+/ig,\" \");\n            //ret.text = `${ret.text} ${text} \\n\\n`;\n            return text;\n        });\n}\n\nconst DEFAULT_OPTIONS = {\n    pagerender: render_page,\n    max: 0,\n    //check https://mozilla.github.io/pdf.js/getting_started/\n    version: 'v1.10.100'\n}\n\nasync function PDF(dataBuffer, options) {\n    var isDebugMode = false;\n\n    let ret = {\n        numpages: 0,\n        numrender: 0,\n        info: null,\n        metadata: null,\n        text: \"\",\n        version: null\n    };\n\n    if (typeof options == 'undefined') options = DEFAULT_OPTIONS;\n    if (typeof options.pagerender != 'function') options.pagerender = DEFAULT_OPTIONS.pagerender;\n    if (typeof options.max != 'number') options.max = DEFAULT_OPTIONS.max;\n    if (typeof options.version != 'string') options.version = DEFAULT_OPTIONS.version;\n    if (options.version == 'default') options.version = DEFAULT_OPTIONS.version;\n\n    PDFJS = PDFJS ? PDFJS : require(`./pdf.js/${options.version}/build/pdf.js`);\n\n    ret.version = PDFJS.version;\n\n    // Disable workers to avoid yet another cross-origin issue (workers need\n    // the URL of the script to be loaded, and dynamically loading a cross-origin\n    // script does not work).\n    PDFJS.disableWorker = true;\n    let doc = await PDFJS.getDocument(dataBuffer);\n    ret.numpages = doc.numPages;\n\n    let metaData = await doc.getMetadata().catch(function(err) {\n        return null;\n    });\n\n    ret.info = metaData ? metaData.info : null;\n    ret.metadata = metaData ? metaData.metadata : null;\n\n    let counter = options.max <= 0 ? doc.numPages : options.max;\n    counter = counter > doc.numPages ? doc.numPages : counter;\n\n    ret.text = \"\";\n\n    for (var i = 1; i <= counter; i++) {\n        let pageText = await doc.getPage(i).then(pageData => options.pagerender(pageData)).catch((err)=>{\n            // todo log err using debug\n            debugger;\n            return \"\";\n        });\n\n        ret.text = `${ret.text}\\n\\n${pageText}`;\n    }\n\n    ret.numrender = counter;\n    doc.destroy();\n\n    return ret;\n}\n\nmodule.exports = PDF;\n", "const Fs = require('fs');\nconst Pdf = require('./lib/pdf-parse.js');\n\nmodule.exports = Pdf;\n\nlet isDebugMode = !module.parent; \n\n//process.env.AUTO_KENT_DEBUG\n\n\n//for testing purpose\nif (isDebugMode) {\n\n    let PDF_FILE = './test/data/05-versions-space.pdf';\n    let dataBuffer = Fs.readFileSync(PDF_FILE);\n    Pdf(dataBuffer).then(function(data) {\n        Fs.writeFileSync(`${PDF_FILE}.txt`, data.text, {\n            encoding: 'utf8',\n            flag: 'w'\n        });\n        debugger;\n    }).catch(function(err) {\n        debugger;\n    });\n\n}\n"],
  "mappings": "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",
  "names": ["require_pdf_parse"]
}
